<!DOCTYPE html>
<html>
	<head>
		<title>ICQA Waves</title>

		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

		<meta name="author" content="Orzo Cogorzo" />
		<meta name="description" content="ICQA Waves is a visualization of BCN air polution in a 3D way" />
		<meta name="keywords" content="ICQA, dataviz, opendata, BCN Open Data, Data World Viz Challenge, three.js" />
		
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,500,700&display=swap" rel="stylesheet">
	</head>
	<body>
		<div id="welcome">
			<div>Benvingut a</div>
			<div class="title"><span>ICQA</span><span>WAVES</span></div>
			<div class="spin-loader"></div>
		</div>
		<canvas id="canvas"></canvas>
		<div id="selection">
            <div class="magnitudes menu">
                <div class="magnitudes__title title">CONTAMINANTS</div>
                <div class="magnitudes__item item active" data-value="SO2">
                    <abbr title="Diòxid de sofre">SO2</abbr></div>
                <div class="magnitudes__item item" data-value="NO2">
                    <abbr title="Diòxid de nitrogen">NO2</abbr></div>
                <div class="magnitudes__item item" data-value="CO">
                    <abbr title="Monòxid de carboni">CO</abbr></div>
                <!-- <div class="magnitudes__item item" data-value="NO">
                <abbr title="Òxid de nitrogen">NOx</abbr></div> -->
                <div class="magnitudes__item item" data-value="O3">
                    <abbr title="Ozó">O3</abbr></div>
                <div class="magnitudes__item item" data-value="PM10">
                    <abbr title="Micropartícules en supensió">PM10</abbr></div>
            </div>
			<div class="scales menu">
				<div class="scales__title title">ESCALES</div>
				<div class="scales__scale item active" data-value="absolute">
					<abbr title="Escala de l'eix Z en funció de l'escala estandaritzada del ICQA">LÍMITS LEGALS</abbr></div>
				<div class="scales__scale item" data-value="relative">
					<abbr title="Escala de l'eix Z en funció als valors de les dades visibles">RELATIVA</abbr></div>
            </div>
		</div>
        <div id="legend">
            <div class="legend__title">LLEGENDA</div>
            <div class="legend__wrapper"></div>
        </div>
		<div id="info">
			<div class="info__icon"></div>
			<div class="info__content">
				<p>Visualització de les mesures dels diferents contaminants mesurats per l'ICQA per a l'àmbit de l'Àrea Metropolitana de Barcelona.</p>
				<h4>Colors</h4>
				<p>L'escala de valors es tradueix, a la visualització, en una escala de colors que compren els següents valors:
					<span style="color: #ff4891;"><b>Molt Dolent</b></span>,
					<span style="color: #d2769e;"><b>Dolent</b></span>,
					<span style="color: #77d2b7;"><b>Bo</b></span>,
					<span style="color: #4affc3;"><b>Molt Bo</b></span>
				</p>
				<h4>Escales</h4>
				<p><b>L'escala basada en els Límits Legals</b> s'ajusta als parametres definits per la normativa europea (Directiva 2008/50/CE, Directiva 2004/107/CE, Directiva 2015/1480/UE, Decisión de ejecución de la Comisión 2011/850/UE) com a límits legals. Aquesta escala es constant en el temps permetent així fer comparacions en el temps. La distribució normal de les dades fa que els canvis i les diferències entre dies i zones quedin dissimulades i sigui difícil identificar les diferències territorials.</p>
				<p><b>L'escala relativa</b> utilitza els valors màxim/minim relatius a la data i l'hora seleccionades per a determinar l'altura i el color de les linies
				representades. El rang amb el que es treballa és, per tant, variable. Els resultats d'aquest mode de visualització no són comparables en el temps.
				L'objectiu d'aquesta escala es representar les diferències entre els diferents territoris de l'AMB i servir d'eina per a l'identificació
				patrons de concentració relativa de contaminació.</p>
				<h4>Metodologia</h4>
				<p>Interpolació amb l'algoritme <em>Inverse Distance Weighting</em> dels valors de les estacions de mesura de l'AMB obtenint una matriu de valors
				amb extensió espaial corresponent a l'àrea de l'AMB. Ajustada l'extensió geogràfica de la matriu als límits municipals, s'inverteixen els valors
				amb tal d'obtenir un index amb rang de valors de 0 a 200, sent 200 el pitjor dels casos i 0 el millor. De la matriu se n'extreuen isolinies d'unió
				de cel·les amb valors iguals i, un cop traduides a format <em>GeoJSON</em>, es pinten al visor tractades com a linies d'altura.</p>
			</div>
		</div>
		<div id="controls">
			<div class="time-controls">
				<div id="timeline"></div>
				<div id="calendar"></div>
			</div>
			<div class="animation-controls"><div id="animate" class="loading"></div></div>
		</div>
		<script type="module" src="./src/index.js"></script>
	</body>
</html>
